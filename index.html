<!DOCTYPE html>
<html class="sl-theme-dark">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>SVGtoDisplay</title>

    <link rel="icon" href="favicon.ico" type="image/x-icon" />

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/themes/dark.css" />
    <script type="module"
        src="https://cdn.jsdelivr.net/npm/@shoelace-style/shoelace@2.20.1/cdn/shoelace-autoloader.js"></script>

    <link rel="stylesheet" href="style.css" />
</head>

<body>
    <header>
        <h2 class="title">
            <img src="./SVGtoDisplay.png" style="height: 2rem;" />
            SVGtoDisplay
        </h2>
        <div class="header-right">
            <sl-button variant="text" size="large" id="about-btn">About</sl-button>
            <sl-icon-button name="list" label="Menu" class="hamburger hidden" id="menu-toggle"></sl-icon-button>
        </div>
    </header>

    <sl-dialog label="About" id="about-dialog">

        <h3 style="display: flex; align-items: center; gap: 0.5rem">
            <img src="./SVGtoDisplay.png" style="height: 2rem" />
            <div>
                <strong>SVGtoDisplay</strong>
                <span id="version"></span>
            </div>
        </h3>
        <p>Convert svg to minecraft display.</p>
        <br />
        <p>github repository: </p>
        <a href="https://github.com/minkyet/SVGtoDisplay" target='_blank'>https://github.com/minkyet/SVGtoDisplay</a>
        <sl-button slot="footer" variant="primary"
            onclick="document.getElementById('about-dialog').hide()">Close</sl-button>
    </sl-dialog>

    <sl-dialog label="Replace Current SVG?" id="replace-confirm-dialog">
        <p>
            A different SVG file is already loaded. Loading a new file will replace the current one and discard any
            unsaved changes.
        </p>
        <sl-button slot="footer" variant="default" id="cancel-replace-btn">Cancel</sl-button>
        <sl-button slot="footer" variant="primary" id="confirm-replace-btn">Replace</sl-button>
    </sl-dialog>

    <sl-dialog label="Summon Command" id="summon-command-dialog">
        <sl-alert variant="warning" open id="long-command-alert" class="hidden">
            <sl-icon slot="icon" name="exclamation-triangle"></sl-icon>
            The command length exceeds 32,767.<br />
            You may not be able to paste into a command block.
        </sl-alert>
        <br />
        <div class="command-header">
            <p>command</p>
            <sl-copy-button id="copy-command-btn"></sl-copy-button>
        </div>
        <sl-textarea id="command-text" filled></sl-textarea>
        <sl-button slot="footer" variant="primary"
            onclick="document.getElementById('summon-command-dialog').hide()">Close</sl-button>
    </sl-dialog>

    <main>
        <section id="svg-render-area">
            <div id="svg-upload-popup" class="svg-upload-popup">
                <p>Drop your SVG file or</p>
                <sl-button variant="primary" id="upload-btn" class="upload-btn">
                    <sl-icon name="box-arrow-in-down" style="font-size: 24px" slot="prefix"></sl-icon>
                    Upload file
                </sl-button>
                <input type="file" id="file-input" accept=".svg" hidden />
            </div>
        </section>

        <aside id="sidebar">
            <div class="sidebar-content">

                <div class="sidebar-section file-info">
                    <p id="filename-label">No file loaded</p>
                    <sl-tooltip hoist content="Replace to another file">
                        <sl-button variant="primary" size="medium" circle id="reupload-btn" class="upload-btn">
                            <sl-icon name="arrow-clockwise"></sl-icon>
                        </sl-button>
                    </sl-tooltip>
                </div>

                <div class="sidebar-section sample-info">
                    <sl-range label="Sample rate" tooltip="top" id="samplerate-slider" min="0.25" max="10" step="0.25"
                        value="5" tooltip></sl-range>

                    <sl-button id="convert-btn" variant="primary" size="medium">
                        <sl-icon name="columns-gap" slot="prefix"></sl-icon>
                        Convert to Display
                    </sl-button>

                    <div class="sample-results">
                        <div>polygons: <span id="polygon-count">?</span></div>
                        <div>vertices: <span id="vertice-count">?</span></div>
                        <div>displays: <span id="display-count">?</span></div>
                    </div>
                </div>

                <div class="sidebar-section">
                    <sl-radio-group label="Select Color Mode" name="mode" value="1" id="colormode-group">
                        <sl-radio-button value="1">
                            Solid color
                        </sl-radio-button>
                        <sl-tooltip placement="top-end" hoist content="Apply the original color.">
                            <sl-radio-button value="2">
                                Multi color
                            </sl-radio-button>
                        </sl-tooltip>
                    </sl-radio-group>
                </div>

                <div class="sidebar-section display-type">
                    <sl-radio-group label="Display type" name="type" value="1" id="display-type-group">
                        <sl-tooltip placement="top-start" hoist disabled
                            content="Multicolor mode is for Text display only." id="block-display-radio-tooltip">
                            <sl-radio value="1" id="block-display-radio">Block display</sl-radio>
                        </sl-tooltip>
                        <div id="block-input-wrapper" class="radio-extra active">
                            <sl-input placeholder="Block name" value="pink_concrete" id="global-block-type"></sl-input>
                        </div>

                        <sl-radio value="2">Text display</sl-radio>
                        <div id="text-input-wrapper" class="radio-extra">
                            <sl-color-picker value="#F03691" id="global-color"></sl-color-picker>
                        </div>
                    </sl-radio-group>
                </div>

                <div class="sidebar-section toggle-eyes">
                    <div class="eye-row">
                        <p>original SVG</p>
                        <sl-icon-button id="toggle-original" name="eye" label="Toggle original"></sl-icon-button>
                    </div>
                    <div class="eye-row">
                        <p>display</p>
                        <sl-icon-button id="toggle-display" name="eye" label="Toggle display"></sl-icon-button>
                    </div>
                    <div class="eye-row">
                        <p>outline</p>
                        <sl-icon-button id="toggle-border" name="eye" label="Toggle border"></sl-icon-button>
                    </div>
                    <div class="eye-row">
                        <p>boundary box</p>
                        <sl-icon-button id="toggle-bbox" name="eye" label="Toggle bbox"></sl-icon-button>
                    </div>
                </div>

                <div class="sidebar-section global-options">
                    <p>[Global Options]</p>
                    <div class="input-pair">
                        <sl-input type="number" label="Depth" id="depth-input" value="0.0625"></sl-input>
                        <sl-input type="number" label="Width" id="width-input" value="10"></sl-input>
                    </div>
                </div>

            </div>
            <div class="summon-button">
                <sl-tooltip placement="top-end" hoist content="You need to apply [Convert to Display] first."
                    id="summon-btn-tooltip">
                    <sl-button id="summon-btn" variant="primary">
                        <sl-icon name="box" slot="prefix"></sl-icon>
                        Summon command
                    </sl-button>
                </sl-tooltip>
            </div>
        </aside>
    </main>

    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.js@latest/dist/svg.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.topoly.js@latest/dist/svg.topoly.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.topath.js@latest/dist/svg.topath.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@svgdotjs/svg.panzoom.js@latest/dist/svg.panzoom.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/libtess@1.2.2/libtess.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/polygon-clipping@0.15.7/dist/polygon-clipping.umd.min.js"></script>
    <script type="module" src="script.js"></script>
</body>

</html>